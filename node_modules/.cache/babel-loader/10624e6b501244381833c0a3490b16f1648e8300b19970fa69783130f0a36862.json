{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USER/Desktop/atendanceManagementSystemByGroup1/Attendance/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/USER/Desktop/atendanceManagementSystemByGroup1/Attendance/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/USER/Desktop/atendanceManagementSystemByGroup1/Attendance/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./takeAttendance.module.css\";import Button from\"../../UI/button/Button\";import NativeSideBar from\"../nativeSideBar/nativeSideBar\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{getIpAddress}from\"../../../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TakeAttendance=function TakeAttendance(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];// const [attendanceStatus, setAttendanceStatus] = useState(\"\")\nvar _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),ipAddress=_useState10[0],setIpAddress=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),screenWidth=_useState12[0],setScreenWidth=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),screenHeight=_useState14[0],setScreenHeight=_useState14[1];useEffect(function(){function apiCall(){return _apiCall.apply(this,arguments);}function _apiCall(){_apiCall=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var ipAddress;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getIpAddress();case 2:ipAddress=_context.sent;setIpAddress(ipAddress);console.log(\"Ip addrress -> \",ipAddress);case 5:case\"end\":return _context.stop();}},_callee);}));return _apiCall.apply(this,arguments);}apiCall();var firstName=sessionStorage.getItem(\"firstName\");setFirstName(firstName);},[]);useEffect(function(){setInterval(function(){setTime(getTime());},1000);},[]);function getTime(){var now=new Date();return now.toLocaleString(\"en-Us\",{day:\"numeric\",month:\"long\",year:\"numeric\",hour:\"numeric\",minute:\"numeric\",second:\"numeric\"});}useEffect(function(){var screenWidth=window.screen.width;var screenHeight=window.screen.height;setScreenWidth(screenWidth);setScreenHeight(screenHeight);},[]);var onClickHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var jwtToken,userDetails,headers,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:// e.preventDefault;\n// setAttendanceStatus(\"PRESENT\");\njwtToken=sessionStorage.getItem('jwtToken');// console.log(attendanceStatus)\nuserDetails={// attendanceStatus: attendanceStatus,\n// jwtToken: jwtToken,\nscreenWidth:screenWidth,screenHeight:screenHeight,ipAddress:ipAddress};headers={\"Authorization\":\"Bearer \".concat(jwtToken),'Content-Type':'application/json'};console.log(\"Data sent successfully:\",userDetails);_context2.prev=4;_context2.next=7;return axios.post(\"https://elitestracker-production.up.railway.app/api/v1/natives/takeAttendanc\",userDetails,{headers:headers});case 7:response=_context2.sent;if(!response){_context2.next=15;break;}console.log(\"Data sent successfully:\",response);console.log(\"Data sent successfully:\",response.data);console.log(\"response\",response.status);setMessage(response.data.data);_context2.next=16;break;case 15:throw new Error(\"Network Error\");case 16:_context2.next=24;break;case 18:_context2.prev=18;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0.message);console.log(_context2.t0.response);setError(_context2.t0.response);setError(_context2.t0.message);// setError(error.response.data.data);\n// console.log(error);\ncase 24:case\"end\":return _context2.stop();}},_callee2,null,[[4,18]]);}));return function onClickHandler(_x){return _ref.apply(this,arguments);};}();// useEffect(() => {\n//   const fetchCurrentTimeAndDate = async () => {\n//     try {\n//       const response = await fetch(\n//         \"http://worldtimeapi.org/api/timezone/Africa/Lagos\"\n//       );\n//       if (response.ok) {\n//         const data = await response.json();\n//         const dateTimeString = new Date(data.utc_datetime).toLocaleString();\n//         setCurrentDateTime(dateTimeString);\n//       } else {\n//         throw new Error(\"Failed to fetch time and date\");\n//       }\n//     } catch (error) {\n//       console.error(\"Error fetching time and date:\", error);\n//     }\n//   };\n//   fetchCurrentTimeAndDate();\n// }, []);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:classes.flex,children:[/*#__PURE__*/_jsx(NativeSideBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:classes.main,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",firstName,\" \"]}),/*#__PURE__*/_jsx(\"h2\",{className:classes.time,children:time}),/*#__PURE__*/_jsx(\"p\",{children:\"Please, take your attendance\"}),/*#__PURE__*/_jsx(Button,{onClick:onClickHandler,className:classes.button,children:\"Take Attendance\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:classes.message,children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:classes.message,children:error})]})]});};export default TakeAttendance;","map":{"version":3,"names":["classes","Button","NativeSideBar","useEffect","useState","axios","getIpAddress","jsx","_jsx","jsxs","_jsxs","TakeAttendance","_useState","_useState2","_slicedToArray","firstName","setFirstName","_useState3","_useState4","message","setMessage","_useState5","_useState6","time","setTime","_useState7","_useState8","error","setError","_useState9","_useState10","ipAddress","setIpAddress","_useState11","_useState12","screenWidth","setScreenWidth","_useState13","_useState14","screenHeight","setScreenHeight","apiCall","_apiCall","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","sent","console","log","stop","sessionStorage","getItem","setInterval","getTime","now","Date","toLocaleString","day","month","year","hour","minute","second","window","screen","width","height","onClickHandler","_ref","_callee2","e","jwtToken","userDetails","headers","response","_callee2$","_context2","concat","post","data","status","Error","t0","_x","className","flex","children","main","onClick","button"],"sources":["C:/Users/USER/Desktop/atendanceManagementSystemByGroup1/attendance/src/features/nativeDashBoard/takeAttendance/TakeAttendance.jsx"],"sourcesContent":["import classes from \"./takeAttendance.module.css\";\r\nimport Button from \"../../UI/button/Button\";\r\nimport NativeSideBar from \"../nativeSideBar/nativeSideBar\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { getIpAddress } from \"../../../utils\";\r\n\r\nconst TakeAttendance = () => {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  // const [attendanceStatus, setAttendanceStatus] = useState(\"\")\r\n  const [time, setTime] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [ipAddress, setIpAddress] = useState(\"\")\r\n\r\n\r\n  const [screenWidth, setScreenWidth] = useState(0);\r\n  const [screenHeight, setScreenHeight] = useState(0);\r\n\r\n  useEffect(()=>{\r\n     async function apiCall() {\r\n       const ipAddress = await getIpAddress();\r\n       setIpAddress(ipAddress);\r\n       console.log(\"Ip addrress -> \", ipAddress);\r\n     }\r\n    apiCall();\r\n    const firstName = sessionStorage.getItem(\"firstName\");\r\n    setFirstName(firstName);\r\n  },[])\r\n\r\n    useEffect(() => {\r\n      \r\n      setInterval(() => {\r\n        setTime(getTime());\r\n      }, 1000);\r\n    }, []);\r\n\r\n    function getTime() {\r\n      const now = new Date();\r\n      return now.toLocaleString(\"en-Us\", {\r\n        day: \"numeric\",\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n        hour: \"numeric\",\r\n        minute: \"numeric\",\r\n        second: \"numeric\",\r\n      });\r\n    }\r\n\r\n    useEffect(() => {\r\n      const screenWidth = window.screen.width;\r\n      const screenHeight = window.screen.height;\r\n\r\n      setScreenWidth(screenWidth);\r\n      setScreenHeight(screenHeight);\r\n    }, []); \r\n\r\n  const onClickHandler = async (e) => {\r\n    // e.preventDefault;\r\n\r\n    // setAttendanceStatus(\"PRESENT\");\r\n    const jwtToken = sessionStorage.getItem('jwtToken')\r\n    \r\n    // console.log(attendanceStatus)\r\n\r\n    const userDetails = {\r\n      // attendanceStatus: attendanceStatus,\r\n      // jwtToken: jwtToken,\r\n      screenWidth: screenWidth,\r\n      screenHeight: screenHeight,\r\n      ipAddress: ipAddress\r\n    };\r\n\r\n    const headers = {\r\n      \"Authorization\": `Bearer ${jwtToken}`,\r\n      'Content-Type' : 'application/json',\r\n    };\r\n\r\n    console.log(\"Data sent successfully:\", userDetails);\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://elitestracker-production.up.railway.app/api/v1/natives/takeAttendanc\",\r\n        userDetails, {headers}\r\n      );\r\n     \r\n       if (response) {\r\n          console.log(\"Data sent successfully:\", response);\r\n\r\n          console.log(\"Data sent successfully:\", response.data);\r\n          console.log(\"response\", response.status);\r\n          setMessage(response.data.data);\r\n        } else {\r\n          throw new Error(\"Network Error\");\r\n        }\r\n\r\n      } catch (error) {\r\n        console.log(error.message);\r\n        console.log(error.response);\r\n        setError(error.response);\r\n        setError(error.message);\r\n        // setError(error.response.data.data);\r\n\r\n        // console.log(error);\r\n      }\r\n    };\r\n\r\n  // useEffect(() => {\r\n  //   const fetchCurrentTimeAndDate = async () => {\r\n  //     try {\r\n  //       const response = await fetch(\r\n  //         \"http://worldtimeapi.org/api/timezone/Africa/Lagos\"\r\n  //       );\r\n  //       if (response.ok) {\r\n  //         const data = await response.json();\r\n  //         const dateTimeString = new Date(data.utc_datetime).toLocaleString();\r\n  //         setCurrentDateTime(dateTimeString);\r\n  //       } else {\r\n  //         throw new Error(\"Failed to fetch time and date\");\r\n  //       }\r\n  //     } catch (error) {\r\n  //       console.error(\"Error fetching time and date:\", error);\r\n  //     }\r\n  //   };\r\n  //   fetchCurrentTimeAndDate();\r\n  // }, []);\r\n\r\n  return (\r\n    <div className={classes.flex}>\r\n      <NativeSideBar />\r\n      <div className={classes.main}>\r\n        <h1>Welcome, {firstName} </h1>\r\n        <h2 className={classes.time}>{time}</h2>\r\n        <p>Please, take your attendance</p>\r\n        <Button onClick={onClickHandler} className={classes.button}>\r\n          Take Attendance\r\n        </Button>\r\n        {message && <p className={classes.message}>{message}</p>}\r\n        {error && <p className={classes.message}>{error}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TakeAttendance;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}